---
lang: zh-CN
sidebarDepth: 0
meta:
  - name: description
    content: 个人总结的vuepress学习技术文档-语法
  - name: keywords
    content: vuepress,最新技术文档,vuepress语法,markdown语法
---

# 一.基础案例

## 1.初始场景

:::demo

```vue
<template>
  <div ref="example"></div>
</template>

<script>
export default {
  methods: {
    // 对象
    geometry() {
      return {
        cube: new THREE.BoxGeometry(4, 4, 4),
        plane: new THREE.PlaneGeometry(60, 20),
        sphere: new THREE.SphereGeometry(4, 20, 20),
      }
    },
    // 材质
    material() {
      return {
        cube: new THREE.MeshBasicMaterial({
          color: 0xff0000,
          wireframe: true,
        }),
        plane: new THREE.MeshBasicMaterial({ color: 0xcccccc }),
        sphere: new THREE.MeshBasicMaterial({
          color: 0x7777ff,
          wireframe: true,
        }),
      }
    },
    // 模型
    model() {
      var axes = new THREE.AxisHelper(20)
      var geometry = this.geometry()
      var material = this.material()
      var cube = new THREE.Mesh(geometry.cube, material.cube)
      cube.position.x = -4
      cube.position.y = 3
      cube.position.z = 0
      var plane = new THREE.Mesh(geometry.plane, material.plane)
      plane.rotation.x = -0.5 * Math.PI
      plane.position.x = 15
      plane.position.y = 0
      plane.position.z = 0
      var sphere = new THREE.Mesh(geometry.sphere, material.sphere)
      sphere.position.x = 20
      sphere.position.y = 4
      sphere.position.z = 2
      return {
        axes,
        cube,
        plane,
        sphere,
      }
    },
    // 场景
    scene({ model }) {
      let scene = new THREE.Scene()
      for (let key in model) {
        scene.add(model[key])
      }
      return scene
    },
    // 相机
    camera() {
      let camera = new THREE.PerspectiveCamera(
        45,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      )
      camera.position.x = -30
      camera.position.y = 40
      camera.position.z = 30
      return camera
    },
    // 渲染器
    render() {
      var render = new THREE.WebGLRenderer()
      render.setClearColor()
      render.setClearColor(new THREE.Color(0xeeeeee))
      render.setSize(window.innerWidth / 2, window.innerHeight / 2)
      return render
    },
    // 挂载
    element(dom) {
      this.$refs.example.appendChild(dom)
    },
    init() {
      var scene = this.scene({ model: this.model() })
      var camera = this.camera()
      var renderer = this.render()
      camera.lookAt(scene.position)
      renderer.render(scene, camera)
      this.element(renderer.domElement)
    },
  },
  mounted() {
    this.init()
  },
}
</script>
```

:::

## 2.材料与光

:::demo

```vue
<template>
  <div ref="example"></div>
</template>

<script>
export default {
  methods: {
    // 对象
    geometry() {
      return {
        cube: new THREE.BoxGeometry(4, 4, 4),
        plane: new THREE.PlaneGeometry(60, 20, 1, 1),
        sphere: new THREE.SphereGeometry(4, 20, 20),
      }
    },
    // 材质
    material() {
      return {
        cube: new THREE.MeshLambertMaterial({
          color: 0xff0000,
        }),
        plane: new THREE.MeshLambertMaterial({ color: 0xffffff }),
        sphere: new THREE.MeshLambertMaterial({
          color: 0x7777ff,
        }),
      }
    },
    // 模型
    model() {
      var geometry = this.geometry()
      var material = this.material()
      var plane = new THREE.Mesh(geometry.plane, material.plane)
      plane.receiveShadow = true
      plane.rotation.x = -0.5 * Math.PI
      plane.position.x = 15
      plane.position.y = 0
      plane.position.z = 0
      var cube = new THREE.Mesh(geometry.cube, material.cube)
      cube.castShadow = true
      cube.position.x = -4
      cube.position.y = 3
      cube.position.z = 0
      var sphere = new THREE.Mesh(geometry.sphere, material.sphere)
      sphere.position.x = 20
      sphere.position.y = 4
      sphere.position.z = 2
      sphere.castShadow = true
      var spotLight = new THREE.SpotLight(0xffffff)
      spotLight.position.set(-40, 60, -10)
      spotLight.castShadow = true
      return {
        plane,
        cube,
        sphere,
        spotLight,
      }
    },
    // 场景
    scene({ model }) {
      let scene = new THREE.Scene()
      for (let key in model) {
        scene.add(model[key])
      }
      return scene
    },
    // 相机
    camera() {
      let camera = new THREE.PerspectiveCamera(
        45,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      )
      camera.position.x = -30
      camera.position.y = 40
      camera.position.z = 30
      return camera
    },
    // 渲染器
    render() {
      var render = new THREE.WebGLRenderer()
      render.setClearColor()
      render.setClearColor(new THREE.Color(0xeeeeee, 1.0))
      render.setSize(window.innerWidth / 2, window.innerHeight / 2)
      render.shadowMapEnabled = true
      return render
    },
    // 挂载
    element(dom) {
      this.$refs.example.appendChild(dom)
    },
    init() {
      var scene = this.scene({ model: this.model() })
      var camera = this.camera()
      var renderer = this.render()
      camera.lookAt(scene.position)
      renderer.render(scene, camera)
      this.element(renderer.domElement)
    },
  },
  mounted() {
    this.init()
  },
}
</script>
```

:::

## 3.动画

:::demo

```vue
<template>
  <div>
    <div ref="example"></div>
    <div ref="webgl"></div>
  </div>
</template>

<script>
export default {
  methods: {
    // 对象
    geometry() {
      return {
        cube: new THREE.BoxGeometry(4, 4, 4),
        plane: new THREE.PlaneGeometry(60, 20, 1, 1),
        sphere: new THREE.SphereGeometry(4, 20, 20),
      }
    },
    // 材质
    material() {
      return {
        cube: new THREE.MeshLambertMaterial({
          color: 0xff0000,
        }),
        plane: new THREE.MeshLambertMaterial({ color: 0xffffff }),
        sphere: new THREE.MeshLambertMaterial({
          color: 0x7777ff,
        }),
      }
    },
    // 模型
    model() {
      var geometry = this.geometry()
      var material = this.material()
      var cube = new THREE.Mesh(geometry.cube, material.cube)
      cube.castShadow = true
      cube.position.x = -4
      cube.position.y = 3
      cube.position.z = 0
      var plane = new THREE.Mesh(geometry.plane, material.plane)
      plane.receiveShadow = true
      plane.rotation.x = -0.5 * Math.PI
      plane.position.x = 15
      plane.position.y = 0
      plane.position.z = 0
      var sphere = new THREE.Mesh(geometry.sphere, material.sphere)
      sphere.position.x = 20
      sphere.position.y = 0
      sphere.position.z = 2
      sphere.castShadow = true
      var ambientLight = new THREE.AmbientLight(0x0c0c0c)
      var spotLight = new THREE.SpotLight(0xffffff)
      spotLight.position.set(-40, 60, -10)
      spotLight.castShadow = true
      return {
        cube,
        plane,
        sphere,
        ambientLight,
        spotLight,
      }
    },
    // 场景
    scene({ model }) {
      let scene = new THREE.Scene()
      for (let key in model) {
        scene.add(model[key])
      }
      return scene
    },
    // 相机
    camera() {
      let camera = new THREE.PerspectiveCamera(
        45,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      )
      camera.position.x = -30
      camera.position.y = 40
      camera.position.z = 30
      return camera
    },
    // 渲染器
    render() {
      var render = new THREE.WebGLRenderer()
      render.setClearColor(new THREE.Color(0xeeeeee, 1.0))
      render.setSize(window.innerWidth / 2, window.innerHeight / 2)
      render.shadowMapEnabled = true
      return render
    },
    // 挂载
    element(dom) {
      this.$refs.example.appendChild(dom)
    },
    init() {
      var stats = this.initStats()
      var model = this.model()
      var scene = this.scene({ model })
      var camera = this.camera()
      var renderer = this.render()
      camera.lookAt(scene.position)
      this.element(renderer.domElement)
      var step = 0
      renderScene()
      function renderScene() {
        stats.update()
        model.cube.rotation.x += 0.02
        model.cube.rotation.y += 0.02
        model.cube.rotation.z += 0.02
        step += 0.04
        model.sphere.position.x = 20 + 10 * Math.cos(step)
        model.sphere.position.y = 2 + 10 * Math.abs(Math.sin(step))
        requestAnimationFrame(renderScene)
        renderer.render(scene, camera)
      }
    },
    initStats() {
      var stats = new Stats()
      stats.setMode(0) // 0: fps, 1: ms
      stats.domElement.style.position = "absolute"
      stats.domElement.style.left = "0px"
      stats.domElement.style.top = "0px"
      this.$refs.webgl.appendChild(stats.domElement)
      return stats
    },
  },
  mounted() {
    this.init()
  },
}
</script>
```

:::

## 4.添加控件

:::demo

```vue
<template>
  <div style="position:relative">
    <div ref="webgl"></div>
    <div style="position:absolute;right:0" ref="gui"></div>
    <div ref="example"></div>
  </div>
</template>

<script>
export default {
  methods: {
    init() {
      var stats = this.initStats()
      var scene = new THREE.Scene()
      var camera = new THREE.PerspectiveCamera(
        45,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      )
      var renderer = new THREE.WebGLRenderer()

      renderer.setClearColor(new THREE.Color(0xeeeeee, 1.0))
      renderer.setSize(window.innerWidth / 2, window.innerHeight / 2)
      renderer.shadowMapEnabled = true

      // create the ground plane
      var planeGeometry = new THREE.PlaneGeometry(60, 20, 1, 1)
      var planeMaterial = new THREE.MeshLambertMaterial({ color: 0xffffff })
      var plane = new THREE.Mesh(planeGeometry, planeMaterial)
      plane.receiveShadow = true

      // rotate and position the plane
      plane.rotation.x = -0.5 * Math.PI
      plane.position.x = 15
      plane.position.y = 0
      plane.position.z = 0
      scene.add(plane)

      // create a cube
      var cubeGeometry = new THREE.BoxGeometry(4, 4, 4)
      var cubeMaterial = new THREE.MeshLambertMaterial({ color: 0xff0000 })
      var cube = new THREE.Mesh(cubeGeometry, cubeMaterial)
      cube.castShadow = true
      cube.position.x = -4
      cube.position.y = 3
      cube.position.z = 0
      scene.add(cube)

      var sphereGeometry = new THREE.SphereGeometry(4, 20, 20)
      var sphereMaterial = new THREE.MeshLambertMaterial({ color: 0x7777ff })
      var sphere = new THREE.Mesh(sphereGeometry, sphereMaterial)

      // position the sphere
      sphere.position.x = 20
      sphere.position.y = 0
      sphere.position.z = 2
      sphere.castShadow = true

      scene.add(sphere)
      camera.position.x = -30
      camera.position.y = 40
      camera.position.z = 30
      camera.lookAt(scene.position)
      var ambientLight = new THREE.AmbientLight(0x0c0c0c)
      scene.add(ambientLight)
      var spotLight = new THREE.SpotLight(0xffffff)
      spotLight.position.set(-40, 60, -10)
      spotLight.castShadow = true
      scene.add(spotLight)
      this.$refs.example.appendChild(renderer.domElement)
      var step = 0

      var controls = new (function () {
        this.rotationSpeed = 0.02
        this.bouncingSpeed = 0.03
      }.bind(this))()

      var gui = new dat.GUI()
      gui.add(controls, "rotationSpeed", 0, 0.5)
      gui.add(controls, "bouncingSpeed", 0, 0.5)
      this.$refs.gui.appendChild(gui.domElement)
      render()

      function render() {
        stats.update()
        cube.rotation.x += controls.rotationSpeed
        cube.rotation.y += controls.rotationSpeed
        cube.rotation.z += controls.rotationSpeed
        step += controls.bouncingSpeed
        sphere.position.x = 20 + 10 * Math.cos(step)
        sphere.position.y = 2 + 10 * Math.abs(Math.sin(step))
        requestAnimationFrame(render)
        renderer.render(scene, camera)
      }
    },
    initStats() {
      var stats = new Stats()
      stats.setMode(0) // 0: fps, 1: ms
      stats.domElement.style.position = "absolute"
      stats.domElement.style.left = "0px"
      stats.domElement.style.top = "0px"
      this.$refs.webgl.appendChild(stats.domElement)
      return stats
    },
  },
  mounted() {
    this.init()
  },
}
</script>
```

:::

## 5.修改运动

:::demo

```vue
<template>
  <div style="position:relative">
    <div ref="webgl"></div>
    <div style="position:absolute;right:0" ref="gui"></div>
    <div ref="example"></div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      camera: "",
      renderer: "",
    }
  },
  methods: {
    // 对象
    geometry() {
      return {
        cube: new THREE.BoxGeometry(4, 4, 4),
        plane: new THREE.PlaneGeometry(60, 20, 1, 1),
        sphere: new THREE.SphereGeometry(4, 20, 20),
      }
    },
    // 材质
    material() {
      return {
        cube: new THREE.MeshLambertMaterial({
          color: 0xff0000,
        }),
        plane: new THREE.MeshLambertMaterial({ color: 0xffffff }),
        sphere: new THREE.MeshLambertMaterial({
          color: 0x7777ff,
        }),
      }
    },
    // 模型
    model() {
      var geometry = this.geometry()
      var material = this.material()
      var cube = new THREE.Mesh(geometry.cube, material.cube)
      cube.castShadow = true
      cube.position.x = -4
      cube.position.y = 3
      cube.position.z = 0
      var plane = new THREE.Mesh(geometry.plane, material.plane)
      plane.receiveShadow = true
      plane.rotation.x = -0.5 * Math.PI
      plane.position.x = 15
      plane.position.y = 0
      plane.position.z = 0
      var sphere = new THREE.Mesh(geometry.sphere, material.sphere)
      sphere.position.x = 20
      sphere.position.y = 0
      sphere.position.z = 2
      sphere.castShadow = true
      var ambientLight = new THREE.AmbientLight(0x0c0c0c)
      var spotLight = new THREE.SpotLight(0xffffff)
      spotLight.position.set(-40, 60, -10)
      spotLight.castShadow = true
      return {
        cube,
        plane,
        sphere,
        ambientLight,
        spotLight,
      }
    },
    // 场景
    scene({ model }) {
      let scene = new THREE.Scene()
      for (let key in model) {
        scene.add(model[key])
      }
      return scene
    },
    // 相机
    camerafn() {
      let camera = new THREE.PerspectiveCamera(
        45,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      )
      camera.position.x = -30
      camera.position.y = 40
      camera.position.z = 30
      return camera
    },
    // 渲染器
    render() {
      var render = new THREE.WebGLRenderer()
      render.setClearColor(new THREE.Color(0xeeeeee, 1.0))
      render.setSize(window.innerWidth / 2, window.innerHeight / 2)
      render.shadowMapEnabled = true
      return render
    },
    // 挂载
    element(dom) {
      this.$refs.example.appendChild(dom)
    },
    init() {
      var stats = this.initStats()
      var model = this.model()
      var scene = this.scene({ model })
      this.camera = this.camerafn()
      this.renderer = new THREE.WebGLRenderer()
      this.renderer.setClearColor(new THREE.Color(0xeeeeee, 1.0))
      this.renderer.setSize(window.innerWidth / 2, window.innerHeight / 2)
      this.renderer.shadowMapEnabled = true
      this.camera.lookAt(scene.position)
      this.element(this.renderer.domElement)
      var step = 0
      var controls = new (function () {
        this.rotationSpeed = 0.02
        this.bouncingSpeed = 0.03
      }.bind(this))()

      var gui = new dat.GUI({ autoPlace: false })
      gui.add(controls, "rotationSpeed", 0, 0.5)
      gui.add(controls, "bouncingSpeed", 0, 0.5)
      this.$refs.gui.appendChild(gui.domElement)
      render.call(this)
      function render() {
        stats.update()
        model.cube.rotation.x += controls.rotationSpeed
        model.cube.rotation.y += controls.rotationSpeed
        model.cube.rotation.z += controls.rotationSpeed
        step += controls.bouncingSpeed
        model.sphere.position.x = 20 + 10 * Math.cos(step)
        model.sphere.position.y = 2 + 10 * Math.abs(Math.sin(step))
        requestAnimationFrame(render.bind(this))
        this.renderer.render(scene, this.camera)
      }
    },
    initStats() {
      var stats = new Stats()
      stats.setMode(0)
      stats.domElement.style.position = "absolute"
      stats.domElement.style.left = "0px"
      stats.domElement.style.top = "0px"
      this.$refs.webgl.appendChild(stats.domElement)
      return stats
    },
  },
  mounted() {
    function onResize() {
      this.camera.aspect = window.innerWidth / window.innerHeight
      this.camera.updateProjectionMatrix()
      this.renderer.setSize(window.innerWidth / 2, window.innerHeight / 2)
    }
    this.init()
    window.addEventListener("resize", onResize.bind(this), false)
  },
}
</script>
```

:::
